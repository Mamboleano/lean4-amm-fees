{"name":"AMMLib.FeeVersion.Arbitrage","instances":[],"imports":["Init","AMMLib.FeeVersion.Basic","AMMLib.FeeVersion.Additivity","AMMLib.FeeVersion.Constprod","HelpersLib.Real.Division","HelpersLib.Real.Order","HelpersLib.Real.Subtraction","HelpersLib.PReal.Division","HelpersLib.PReal.Negative"],"declarations":[{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L628-L697","name":"SX.fee.arbitrage.constprod.solution_equil_unique","line":628,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.solution_equil_unique","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.solution_equil_unique\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">constprod</span>.<span class=\"name\">solution_equil_unique</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">h_equil</span> : <span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod.sw_to_equil\">constprod.sw_to_equil</a> <span class=\"fn\">φ</span> <span class=\"fn\">sw0</span> <span class=\"fn\">o</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Not\">¬</a><span class=\"fn\">∃ (<span class=\"fn\">x₁</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>) (<span class=\"fn\">h_enough</span> : <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#LE.le\">≤</a> <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.atoms\">atoms</a></span>.<a href=\"./AMMLib/State/AtomicWallSet.html#S₀.get\">get</a></span> <span class=\"fn\">a</span>)</span> <span class=\"fn\">t0</span></span>), <span class=\"fn\">x₁</span> <a href=\"./Init/Core.html#Ne\">≠</a> <span class=\"fn\">x₀</span> <a href=\"./Init/Prelude.html#And\">∧</a> <span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod.sw_to_equil\">constprod.sw_to_equil</a> <span class=\"fn\">φ</span> <span class=\"fn\">⋯</span> <span class=\"fn\">o</span></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L609-L625","name":"SX.fee.arbitrage.constprod.equil_value_solution_arbitrage","line":609,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.equil_value_solution_arbitrage","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.equil_value_solution_arbitrage\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">constprod</span>.<span class=\"name\">equil_value_solution_arbitrage</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">hφ</span> : <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a> <span class=\"fn\">1</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">h_pos</span> :\n  <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\">o</span> <span class=\"fn\">t0</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">1</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">φ</span>) <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a>     <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a>       <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">⟨(<span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">1</span>) <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">⟨<span class=\"fn\">4</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span>).<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">h0</span> :\n  <span class=\"fn\">x₀</span> <a href=\"./Init/Prelude.html#Eq\">=</a>     <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a>             <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">⟨(<span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">1</span>) <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">⟨<span class=\"fn\">4</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span>).<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span>).<a href=\"./HelpersLib/PReal/Subtraction.html#PReal.sub\">sub</a></span>\n        (<span class=\"fn\"><span class=\"fn\">(<span class=\"fn\">o</span> <span class=\"fn\">t0</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">1</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">φ</span>)) <span class=\"fn\">h_pos</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a>       (<span class=\"fn\">⟨<span class=\"fn\">2</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\">o</span> <span class=\"fn\">t0</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">φ</span>))</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution\">is_solution</a> <span class=\"fn\">φ</span> <span class=\"fn\">sw0</span> <span class=\"fn\">o</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L460-L606","name":"SX.fee.arbitrage.constprod.equil_value","line":460,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.equil_value","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.equil_value\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">constprod</span>.<span class=\"name\">equil_value</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">hφ</span> : <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a> <span class=\"fn\">1</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">h_pos</span> :\n  <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\">o</span> <span class=\"fn\">t0</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">1</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">φ</span>) <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a>     <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a>       <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">⟨(<span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">1</span>) <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">⟨<span class=\"fn\">4</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span>).<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">h0</span> :\n  <span class=\"fn\">x₀</span> <a href=\"./Init/Prelude.html#Eq\">=</a>     <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a>             <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">⟨(<span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">1</span>) <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">⟨<span class=\"fn\">4</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span>).<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span>).<a href=\"./HelpersLib/PReal/Subtraction.html#PReal.sub\">sub</a></span>\n        (<span class=\"fn\"><span class=\"fn\">(<span class=\"fn\">o</span> <span class=\"fn\">t0</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">1</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">φ</span>)) <span class=\"fn\">h_pos</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a>       (<span class=\"fn\">⟨<span class=\"fn\">2</span>, <span class=\"fn\">⋯</span>⟩</span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\">(<span class=\"fn\">o</span> <span class=\"fn\">t0</span>)</span>.<a href=\"./HelpersLib/PReal/Sqrt.html#PReal.sqrt\">sqrt</a></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">φ</span>))</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod.int_rate\">constprod.int_rate</a> <span class=\"fn\">φ</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L423-L456","name":"SX.fee.arbitrage.constprod.solution_more","line":423,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.solution_more","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.solution_more\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">constprod</span>.<span class=\"name\">solution_more</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">hφ</span> : <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a> <span class=\"fn\">1</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">h_equil</span> : <span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod.int_rate\">constprod.int_rate</a> <span class=\"fn\">φ</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution_more\">is_solution_more</a> <span class=\"fn\">φ</span> <span class=\"fn\">sw0</span> <span class=\"fn\">o</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L346-L420","name":"SX.fee.arbitrage.add_gain_εφ_pos","line":346,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.add_gain_εφ_pos","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.add_gain_εφ_pos\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">add_gain_εφ_pos</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀ </span><span class=\"fn\">x </span><span class=\"fn\">x₁</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">hφ</span> : <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a> <span class=\"fn\">1</span>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x</span></span> →\n  <span class=\"fn\">∀ (<span class=\"fn\">sw2</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₁</span></span>) (<span class=\"fn\">no_mints</span> : <span class=\"fn\"><span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.mints\">mints</a></span>.<a href=\"./AMMLib/State/MintedWallSet.html#S₁.get\">get</a></span> <span class=\"fn\">a</span>)</span>.<a href=\"./AMMLib/State/MintedWall.html#W₁.get\">get</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\">0</span>) (<span class=\"fn\">h_split</span> : <span class=\"fn\">x</span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\">x₀</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">x₁</span>)\n    (<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>) (<span class=\"fn\">h_equil</span> : <span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod.int_rate\">constprod.int_rate</a> <span class=\"fn\">φ</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span>),\n    <span class=\"fn\"><span class=\"fn\"><span class=\"fn\">a</span>.<a href=\"./AMMLib/State/Networth.html#A.gain\">gain</a></span> <span class=\"fn\">o</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\"><span class=\"fn\">sw2</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Additivity.html#Swap.fee.εφ\">Swap.fee.εφ</a> <span class=\"fn\">φ</span> <span class=\"fn\">sw0</span> <span class=\"fn\">sw2</span> <span class=\"fn\">hφ</span> <span class=\"fn\">o</span>)</span></span> <a href=\"./Init/Prelude.html#GT.gt\">&gt;</a> <span class=\"fn\">0</span> <a href=\"./Init/Core.html#Iff\">↔</a> <span class=\"fn\">x</span> <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a> <span class=\"fn\">x₀</span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> <span class=\"fn\">φ</span></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L271-L343","name":"SX.fee.arbitrage.add_gain_εφ_neg","line":271,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.add_gain_εφ_neg","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.add_gain_εφ_neg\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">add_gain_εφ_neg</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀ </span><span class=\"fn\">x </span><span class=\"fn\">x₁</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">hφ</span> : <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a> <span class=\"fn\">1</span>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x</span></span> →\n  <span class=\"fn\">∀ (<span class=\"fn\">sw2</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₁</span></span>) (<span class=\"fn\">no_mints</span> : <span class=\"fn\"><span class=\"fn\"><span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.mints\">mints</a></span>.<a href=\"./AMMLib/State/MintedWallSet.html#S₁.get\">get</a></span> <span class=\"fn\">a</span>)</span>.<a href=\"./AMMLib/State/MintedWall.html#W₁.get\">get</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\">0</span>) (<span class=\"fn\">h_split</span> : <span class=\"fn\">x</span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\">x₀</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">x₁</span>)\n    (<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>) (<span class=\"fn\">h_equil</span> : <span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod.int_rate\">constprod.int_rate</a> <span class=\"fn\">φ</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span>),\n    <span class=\"fn\"><span class=\"fn\"><span class=\"fn\">a</span>.<a href=\"./AMMLib/State/Networth.html#A.gain\">gain</a></span> <span class=\"fn\">o</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\"><span class=\"fn\">sw2</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Additivity.html#Swap.fee.εφ\">Swap.fee.εφ</a> <span class=\"fn\">φ</span> <span class=\"fn\">sw0</span> <span class=\"fn\">sw2</span> <span class=\"fn\">hφ</span> <span class=\"fn\">o</span>)</span></span> <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a> <span class=\"fn\">0</span> <a href=\"./Init/Core.html#Iff\">↔</a> <span class=\"fn\">x</span> <a href=\"./Init/Prelude.html#GT.gt\">&gt;</a> <span class=\"fn\">x₀</span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> <span class=\"fn\">φ</span></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L258-L269","name":"SX.fee.arbitrage.int_rate_simp","line":258,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.int_rate_simp","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.int_rate_simp\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">int_rate_simp</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod.int_rate\">constprod.int_rate</a> <span class=\"fn\">φ</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a>   <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> ((<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">x₀</span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">x₀</span>))</div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L243-L255","name":"SX.fee.arbitrage.big_factor_simp","line":243,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.big_factor_simp","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.big_factor_simp\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">big_factor_simp</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀ </span><span class=\"fn\">x₁</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw1</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₁</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\">(<span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw1</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> (<span class=\"fn\">↑<span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Additivity.html#SX.fee.z\">z</a> <span class=\"fn\">φ</span> <span class=\"fn\">x₀</span> <span class=\"fn\">x₁</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span>)</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">↑<span class=\"fn\">1</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw1</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span>)) <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a>   <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a>     ((<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span>))</div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L194-L241","name":"SX.fee.arbitrage.big_factor_simp'","line":194,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.big_factor_simp'","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.big_factor_simp'\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">big_factor_simp'</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀ </span><span class=\"fn\">x₁</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw1</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₁</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw1</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> (<span class=\"fn\">↑<span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Additivity.html#SX.fee.z\">z</a> <span class=\"fn\">φ</span> <span class=\"fn\">x₀</span> <span class=\"fn\">x₁</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span>)</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">↑<span class=\"fn\">1</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw1</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span>) <a href=\"./Init/Prelude.html#Eq\">=</a>   <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a>     ((<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span>))</div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L155-L192","name":"SX.fee.arbitrage.z_sub_one_α_β_simp","line":155,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.z_sub_one_α_β_simp","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.z_sub_one_α_β_simp\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">z_sub_one_α_β_simp</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀ </span><span class=\"fn\">x₁</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw1</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₁</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\">(<span class=\"fn\">↑<span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Additivity.html#SX.fee.z\">z</a> <span class=\"fn\">φ</span> <span class=\"fn\">x₀</span> <span class=\"fn\">x₁</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span>)</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">↑<span class=\"fn\">1</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw1</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span>) <a href=\"./Init/Prelude.html#Eq\">=</a>   <a href=\"./Init/Prelude.html#Neg.neg\">-</a>(<span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">1</span>) <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a>       ((<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a>         (<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span>)))</div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L94-L153","name":"SX.fee.arbitrage.z_sub_one_simp","line":94,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.z_sub_one_simp","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.z_sub_one_simp\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">z_sub_one_simp</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀ </span><span class=\"fn\">x₁</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₁</span></span> →\n  <span class=\"fn\">↑<span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Additivity.html#SX.fee.z\">z</a> <span class=\"fn\">φ</span> <span class=\"fn\">x₀</span> <span class=\"fn\">x₁</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span>)</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">↑<span class=\"fn\">1</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a>     <a href=\"./Init/Prelude.html#Neg.neg\">-</a>(<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HSub.hSub\">-</a> <span class=\"fn\">↑<span class=\"fn\">1</span></span>) <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a>         ((<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a>           (<span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span>)))</span></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L58-L91","name":"SX.fee.arbitrage.αx₀_add_βx₁_simp","line":58,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.αx₀_add_βx₁_simp","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.αx₀_add_βx₁_simp\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">αx₀_add_βx₁_simp</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀ </span><span class=\"fn\">x₁</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw1</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₁</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\"><span class=\"fn\">sw1</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.rate\">rate</a></span></span> <a href=\"./Init/Prelude.html#Eq\">=</a>   <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HPow.hPow\">^</a> <span class=\"fn\">2</span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span>) <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a>     ((<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₁</span></span>) <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> (<span class=\"fn\">↑<span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\">s</span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#HAdd.hAdd\">+</a> <span class=\"fn\">↑<span class=\"fn\">φ</span></span> <a href=\"./Init/Prelude.html#HMul.hMul\">*</a> <span class=\"fn\">↑<span class=\"fn\">x₀</span></span>))</div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L24-L56","name":"SX.fee.arbitrage.constprod.solution_less","line":24,"kind":"theorem","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.solution_less","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">theorem</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.constprod.solution_less\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">constprod</span>.<span class=\"name\">solution_less</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw0</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">(<a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod\">constprod</a> <span class=\"fn\">φ</span>)</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">hφ</span> : <span class=\"fn\">φ</span> <a href=\"./Init/Prelude.html#LT.lt\">&lt;</a> <span class=\"fn\">1</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">h_equil</span> : <span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Constprod.html#SX.fee.constprod.int_rate\">constprod.int_rate</a> <span class=\"fn\">φ</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r0\">r0</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span> <span class=\"fn\">(<span class=\"fn\"><span class=\"fn\"><span class=\"fn\"><span class=\"fn\">sw0</span>.<a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap.apply\">apply</a></span>.<a href=\"./AMMLib/State/State.html#Γ.amms\">amms</a></span>.<a href=\"./AMMLib/State/AMMs.html#AMMs.r1\">r1</a></span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">⋯</span>)</span></span> <a href=\"./Init/Prelude.html#Eq\">=</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t0</span></span> <a href=\"./Init/Prelude.html#HDiv.hDiv\">/</a> <span class=\"fn\"><span class=\"fn\">o</span> <span class=\"fn\">t1</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution_less\">is_solution_less</a> <span class=\"fn\">sw0</span> <span class=\"fn\">o</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L20-L21","name":"SX.fee.arbitrage.is_solution","line":20,"kind":"def","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">is_solution</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">sx</span> : <a href=\"./AMMLib/Transaction/Swap/Rate.html#SX\">SX</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">sx</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Prop</a></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L16-L18","name":"SX.fee.arbitrage.is_solution_more","line":16,"kind":"def","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution_more","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution_more\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">is_solution_more</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">φ</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">sx</span> : <a href=\"./AMMLib/Transaction/Swap/Rate.html#SX\">SX</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">sx</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Prop</a></div></div>"},{"info":{"sourceLink":"https://github.com/Mamboleano/lean4-amm-fees/blob/8901a0b5262ba1550dbf9a95b3a71130f374fcfc/AMMLib/FeeVersion/Arbitrage.lean#L12-L14","name":"SX.fee.arbitrage.is_solution_less","line":12,"kind":"def","docLink":"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution_less","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./AMMLib/FeeVersion/Arbitrage.html#SX.fee.arbitrage.is_solution_less\"><span class=\"name\">SX</span>.<span class=\"name\">fee</span>.<span class=\"name\">arbitrage</span>.<span class=\"name\">is_solution_less</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">sx</span> : <a href=\"./AMMLib/Transaction/Swap/Rate.html#SX\">SX</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">s</span> : <a href=\"./AMMLib/State/State.html#Γ\">Γ</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">a</span> : <a href=\"./AMMLib/State/Tokens.html#A\">A</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">t0 </span><span class=\"fn\">t1</span> : <a href=\"./AMMLib/State/Tokens.html#T\">T</a>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">x₀</span> : <a href=\"./HelpersLib/PReal/Basic.html#PReal\">ℝ&gt;0</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">sw</span> : <span class=\"fn\"><a href=\"./AMMLib/Transaction/Swap/Basic.html#Swap\">Swap</a> <span class=\"fn\">sx</span> <span class=\"fn\">s</span> <span class=\"fn\">a</span> <span class=\"fn\">t0</span> <span class=\"fn\">t1</span> <span class=\"fn\">x₀</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./AMMLib/State/State.html#O\">O</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Prop</a></div></div>"}]}